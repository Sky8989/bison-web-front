webpackJsonp([21],{"0ugn":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"totalData",components:{download:function(t){return o.e(12).then(function(){var e=[o("V/yR")];t.apply(null,e)}.bind(this)).catch(o.oe)}},data:function(){return{tableHeadCountry:"",disabled:!0,searchInfo:{businessUnitId:"",operationGroup:"",userCharges:"",productCategory:"",productModelNumber:"",asinId:""},userChargeList:[],BUList:[],operationGroupList:[],userList:[],productCategoryList:[],productList:[],asinList:[],countryList:[],tHeader:["BU","产品系列","国家","负责人","运营组别","产品型号","ASIN"],userAllList:[]}},methods:{init:function(){this.clearSearchInfo(),this.search(),this.initBU(),this.initProductCategory(),this.initUserCharge(),this.initModelNumber(),this.initAsin(),this.initCountryList()},initBU:function(){var t=this;this.$ajax.get("http://192.168.1.224:10022/businessUnit/findAllBU",{}).then(function(e){if("200"==e.data.code){var o=e.data.data;t.BUList=o}})},initProductCategory:function(){var t=this,e=this.HOST+"/productSubscription/findProductCategoryAll";this.$ajax.get(e,{}).then(function(e){if("200"==e.data.code){var o=e.data.data;t.productCategoryList=o}})},initUserCharge:function(){var t=this,e=this.HOST+"/productSubscription/findUserChargeAll";this.$ajax.get(e,{}).then(function(e){if("200"==e.data.code){var o=e.data.data;t.userList=o}})},initModelNumber:function(){var t=this,e=this.HOST+"/productSubscription/findModelNumberAll";this.$ajax.get(e,{}).then(function(e){if("200"==e.data.code){var o=e.data.data;t.productList=o}})},initAsin:function(){var t=this,e=this.HOST+"/productSubscription/findAsinAll";this.$ajax.get(e,{}).then(function(e){"200"==e.data.code&&(t.asinList=[],t.asinList=e.data.data)})},chooseBU:function(){var t=this;this.disabled=!1;var e=this.searchInfo.businessUnitId,o=this.HOST+"/productSubscription/findOperationGroupByBuId/"+e;console.log(o),this.$ajax.get(o,{}).then(function(e){"200"==e.data.code&&(console.log(e.data),t.operationGroupList=[],t.operationGroupList=e.data.data)}).then(function(t){console.log(t)});var a=this.HOST+"/productSubscription/findProductCategoryByBuId/"+e;console.log(a),this.$ajax.get(a,{}).then(function(e){"200"==e.data.code&&(console.log("productCategoryList"),t.productCategoryList=[],t.productCategoryList=e.data.data)}).then(function(t){console.log(t)})},chooseDept:function(){var t=this,e=this.searchInfo.operationGroup,o=this.HOST+"/productSubscription/findUserChargeByDeptId/"+e;console.log(o),this.$ajax.get(o,{}).then(function(e){"200"==e.data.code&&(console.log(e.data),t.userList=e.data.data)}).then(function(t){console.log(t)})},chooseProductCategory:function(){var t=this,e=this.searchInfo.productCategory,o=this.HOST+"/productSubscription/findModelNumberByproductCategoryId/"+e;console.log(o),this.$ajax.get(o,{}).then(function(e){"200"==e.data.code&&(console.log(e.data),t.productList=[],t.productList=e.data.data)}).then(function(t){console.log(t)});var a=this.HOST+"/productSubscription/findAsinByproductCategoryId/"+e;console.log(a),this.$ajax.get(a,{}).then(function(e){"200"==e.data.code&&(console.log(e.data),t.asinList=[],t.asinList=e.data.data)}).then(function(t){console.log(t)})},chooseProductModelNumber:function(){var t=this,e=this.searchInfo.productModelNumber,o=this.HOST+"/productSubscription/findAsinByproductModelNumber/"+e;this.$ajax.get(o,{}).then(function(e){"200"==e.data.code&&(console.log(e.data),t.asinList=[],t.asinList=e.data.data)}).then(function(t){console.log(t)})},chooseCountry:function(){var t=this.HOST+"/productSubscription/findProductSubscriptionList";this.requerstSearch(t)},search:function(){var t=this.HOST+"/productSubscription/findProductSubscriptionList";this.requerstSearch(t)},requerstSearch:function(t){var e=this;console.log("requerstSearch"),console.log(this.tableHeadCountry);var o={businessUnitId:this.searchInfo.businessUnitId,operationGroup:this.searchInfo.operationGroup,userCharge:this.searchInfo.userCharges,productCategory:this.searchInfo.productCategory,productModelNumber:this.searchInfo.productModelNumber,asinId:this.searchInfo.asinId,countryIds:this.tableHeadCountry};this.$ajax({method:"post",url:t,data:o}).then(function(t){"200"==t.data.code&&(e.userChargeList=t.data.data.productSubscriptionList,e.userAllList=t.data.data.userAllList)}).catch(function(t){console.log(t)})},clearSearchInfo:function(){this.searchInfo.businessUnitId="",this.searchInfo.operationGroup="",this.searchInfo.userCharge="",this.searchInfo.productCategory="",this.searchInfo.productModelNumber="",this.searchInfo.asinId=""},initCountryList:function(){var t=this,e=this.HOST+"/findProductCharge/findCountry";this.$ajax.get(e,{}).then(function(e){"200"==e.data.code&&(console.log(e.data.data),t.countryList=e.data.data)}).catch(function(t){console.log(t)})},download:function(){var t=this;this.$confirm("确定下载？","提示",{confirmButtonText:"确定下载",cancelButtonText:"取消",type:"warning"}).then(function(){t.goDownload()})},goDownload:function(){var t=this,e=this.HOST+"/productSubscription/downloadProductSubscriptionList",o={businessUnitId:this.searchInfo.businessUnitId,operationGroup:this.searchInfo.operationGroup,userCharge:this.searchInfo.userCharge,productCategory:this.searchInfo.productCategory,productModelNumber:this.searchInfo.productModelNumber,asinId:this.searchInfo.asinId};this.$ajax({method:"get",url:e,data:o}).then(function(e){"200"==e.data.code&&(t.userChargeList=e.data.data),console.log("download"),console.log(e)}).catch(function(t){console.log(t)})}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"totalData"},[o("el-form",{attrs:{model:t.searchInfo,method:"post",encType:"multipart/form-data"}},[o("el-form-item",{staticStyle:{float:"left"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:3}},[o("el-select",{attrs:{placeholder:"BU",filterable:"",clearable:""},on:{change:t.chooseBU},model:{value:t.searchInfo.businessUnitId,callback:function(e){t.$set(t.searchInfo,"businessUnitId",e)},expression:"searchInfo.businessUnitId"}},t._l(t.BUList,function(t){return o("el-option",{key:t.businessUnitId,attrs:{value:t.businessUnitId,label:t.businessUnit}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-select",{attrs:{placeholder:"运营组别",filterable:"",clearable:"",disabled:t.disabled},on:{change:t.chooseDept},model:{value:t.searchInfo.operationGroup,callback:function(e){t.$set(t.searchInfo,"operationGroup",e)},expression:"searchInfo.operationGroup"}},t._l(t.operationGroupList,function(t){return o("el-option",{key:t.id,attrs:{value:t.id,label:t.departmentName}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-select",{attrs:{placeholder:"负责人",filterable:"",clearable:""},model:{value:t.searchInfo.userCharges,callback:function(e){t.$set(t.searchInfo,"userCharges",e)},expression:"searchInfo.userCharges"}},t._l(t.userList,function(t){return o("el-option",{key:t.userId,attrs:{value:t.userId,label:t.userName}})}),1)],1)],1),t._v(" "),o("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},[o("el-col",{attrs:{span:3}},[o("el-select",{attrs:{placeholder:"产品系列",filterable:"",clearable:""},on:{change:t.chooseProductCategory},model:{value:t.searchInfo.productCategory,callback:function(e){t.$set(t.searchInfo,"productCategory",e)},expression:"searchInfo.productCategory"}},t._l(t.productCategoryList,function(t){return o("el-option",{key:t.productCategoryId,attrs:{value:t.productCategoryId,label:t.productCategory}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-select",{attrs:{placeholder:"产品型号",filterable:"",clearable:""},on:{change:t.chooseProductModelNumber},model:{value:t.searchInfo.productModelNumber,callback:function(e){t.$set(t.searchInfo,"productModelNumber",e)},expression:"searchInfo.productModelNumber"}},t._l(t.productList,function(t){return o("el-option",{key:t.productModelNumber,attrs:{value:t.productModelNumber,label:t.productModelNumber}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-select",{attrs:{placeholder:"ASIN",clearable:"",filterable:""},model:{value:t.searchInfo.asinId,callback:function(e){t.$set(t.searchInfo,"asinId",e)},expression:"searchInfo.asinId"}},t._l(t.asinList,function(t){return o("el-option",{key:t.asinId,attrs:{value:t.asinId,label:t.asin}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{on:{click:t.search}},[t._v("查找")])],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-button",{on:{click:t.clearSearchInfo}},[t._v("清空筛选条件")])],1),t._v(" "),o("el-col",{attrs:{span:3}},[t._v("\n            "),t._v(" "),o("download",{attrs:{tHeader:t.tHeader,tableData:t.userChargeList}})],1)],1)],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{name:"showTable",border:"border",height:"250px",data:t.userChargeList}},[o("el-table-column",{attrs:{prop:"businessUnit",label:"BU"}}),t._v(" "),o("el-table-column",{attrs:{prop:"productCategory",label:"产品系列"}}),t._v(" "),o("el-table-column",{attrs:{prop:"countryName",label:"国家"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-select",{attrs:{placeholder:"请选择国家",clearable:"",filterable:"",multiple:""},on:{change:t.chooseCountry},model:{value:t.tableHeadCountry,callback:function(e){t.tableHeadCountry=e},expression:"tableHeadCountry"}},t._l(t.countryList,function(t){return o("el-option",{key:t.countryId,attrs:{value:t.countryId,label:t.countryName}})}),1)]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"userChargeId",label:"负责人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.userChargeId)+"\n        "),t._l(t.userAllList,function(a){return o("span",[t._v(t._s(e.row.userChargeId==a.userId?a.userName:""))])})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"departmentName",label:"运营组别"}}),t._v(" "),o("el-table-column",{attrs:{prop:"productModelNumber",label:"产品型号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"asin",label:"ASIN"}})],1)],1)},staticRenderFns:[]};var n=o("VU/8")(a,r,!1,function(t){o("RrYw")},"data-v-fc62256a",null);e.default=n.exports},RrYw:function(t,e){}});
//# sourceMappingURL=21.ae6a7b7c6245b3ddd241.js.map
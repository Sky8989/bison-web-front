{"version":3,"sources":["webpack:///src/components/department/opts/tablePersonnel.vue","webpack:///./src/components/department/opts/tablePersonnel.vue?7cd3","webpack:///./src/components/department/opts/tablePersonnel.vue"],"names":["tablePersonnel","props","data","personnelList","departmentId","theUserId","theUserName","activated","this","personnel","created","methods","_this","_url","$store","state","LoginedUser","departmentItem","id","userId","groupId","listData","booleans","$ajax","get","URL_ROOT","then","res","code","i","departmentParentName","parentPath","length","$emit","_editPersonnel","val","_deletebutton","_this2","$confirm","confirmButtonText","cancelButtonText","type","delete","$message","message","catch","_setPermission","the_row","departmentName","roleName","userName","$refs","theUserPermission","_show","getUserPermission","components","permissionDialog","resolve","__webpack_require__","e","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","oe","watch","opts_tablePersonnel","render","_vm","_h","$createElement","_c","_self","attrs","prop","label","width","_v","scopedSlots","_u","key","fn","scope","_s","row","substring","align","size","icon","title","on","click","$event","undefined","ref","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/38.e5138e6a30aafddaa183.js","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"personnelList\">\n      <el-table-column prop=\"userName\" label=\"账号\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"userDisplayName\" label=\"姓名\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"departmentName\" label=\"部门\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"roleName\" label=\"职位\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"departmentParentName\" label=\"直属部门\" width=\"320\">\n        <template\n          slot-scope=\"scope\"\n        >{{scope.row.departmentParentName.substring(0,scope.row.departmentParentName.length-1)}}</template>\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"操作\" align=\"left\">\n        <template slot-scope=\"scope\" v-if=\"departmentId != scope.row.departmentId\">\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-news\" @click=\"_setPermission(scope.row)\" title=\"权限\"></el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-edit\" @click=\"_editPersonnel(scope.row)\" title=\"编辑\"></el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-delete\" @click=\"_deletebutton(scope.row)\" title=\"删除\"></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <permissionDialog\n            ref=\"theUserPermission\"\n            :theUserId=\"theUserId\"\n            :theUserName=\"theUserName\"\n    ></permissionDialog>\n  </div>\n</template>\n<script>\nconst ERR_OK = 200;\n\nexport default {\n  props: [\"groupId\", \"departmentItem\"],\n  data() {\n    return {\n      personnelList: [],\n      departmentId: \"\",\n      theUserId:0,\n      theUserName:'',\n    };\n  },\n  activated() {\n    this.personnel();\n  },\n  created() {\n    this.personnel();\n  },\n  methods: {\n    // 获取下属\n    personnel() {\n      let _url = \"\";\n      this.departmentId = this.$store.state.LoginedUser.departmentId;\n      if (this.departmentItem.id == 0 || !this.departmentItem.id) {\n        _url =\n          \"/login-service/getDepartmentUser/\" +\n          this.$store.state.LoginedUser.userId +\n          \"/\"+this.$store.state.LoginedUser.departmentId;\n      } else {\n        _url =\n          \"/login-service/getDepartmentUser/getDirectUser/\" +\n          this.$store.state.LoginedUser.userId +\n          \"/\" +\n          this.groupId;\n      }\n      let listData = [];\n      let booleans = false;\n      this.$ajax.get(this.URL_ROOT + _url).then(res => {\n        if (res.data.code == ERR_OK) {\n          listData = res.data.data;\n          for (let i in listData) {\n            if (!listData[i].departmentParentName) {\n              listData[i].departmentParentName = this.departmentItem.parentPath;\n            }\n          }\n          this.personnelList = listData;\n          if (this.personnelList.length > 0) {\n            booleans = false;\n          } else {\n            booleans = true;\n          }\n          this.$emit(\"deleteGroup\", booleans);\n        }\n      });\n    },\n    // 编辑人员\n    _editPersonnel(val) {\n\n      this.$emit(\"success\", val);\n    },\n    // 删除人员\n    _deletebutton(val) {\n      this.$confirm(\"此操作将永久删除该人员, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          this.$ajax\n            .delete(this.URL_ROOT + \"/login-service/users/+\" + val.userId)\n            .then(res => {\n              if (res.data.code == ERR_OK) {\n                this.$message({\n                  type: \"success\",\n                  message: \"删除成功!\"\n                });\n                this.personnel();\n              }\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\"\n          });\n        });\n    },\n    _setPermission(the_row){\n      this.theUserId = the_row.userId;\n      this.theUserName = the_row.departmentName + \"/\" + the_row.roleName +\":\" + the_row.userName;\n      this.$refs.theUserPermission._show();\n      this.$refs.theUserPermission.getUserPermission();\n\n    },\n  },\n  components:{\n    permissionDialog:resolve =>\n            require([\"components/department/opts/permissionDialog.vue\"], resolve)\n  },\n  watch: {\n    groupId() {\n      this.personnel();\n    }\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/department/opts/tablePersonnel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{attrs:{\"data\":_vm.personnelList}},[_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"账号\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userDisplayName\",\"label\":\"姓名\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"departmentName\",\"label\":\"部门\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"职位\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"departmentParentName\",\"label\":\"直属部门\",\"width\":\"320\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.departmentParentName.substring(0,scope.row.departmentParentName.length-1)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"操作\",\"align\":\"left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (_vm.departmentId != scope.row.departmentId)?[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"icon\":\"el-icon-news\",\"title\":\"权限\"},on:{\"click\":function($event){return _vm._setPermission(scope.row)}}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"icon\":\"el-icon-edit\",\"title\":\"编辑\"},on:{\"click\":function($event){return _vm._editPersonnel(scope.row)}}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"icon\":\"el-icon-delete\",\"title\":\"删除\"},on:{\"click\":function($event){return _vm._deletebutton(scope.row)}}})]:undefined}}],null,true)})],1),_vm._v(\" \"),_c('permissionDialog',{ref:\"theUserPermission\",attrs:{\"theUserId\":_vm.theUserId,\"theUserName\":_vm.theUserName}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e45e6a9e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/department/opts/tablePersonnel.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tablePersonnel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tablePersonnel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e45e6a9e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tablePersonnel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/department/opts/tablePersonnel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
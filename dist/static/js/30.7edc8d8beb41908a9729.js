webpackJsonp([30],{oAx7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={props:["countryId"],data:function(){return{subscriptionList:[],productSelection:[]}},methods:{_personnelList:function(){var t=this;this.subscriptionList=[],this.$ajax.get(this.URL_ROOT+"/product-service/userCountryProductRel/findByCountryIdAndBusinessId?countryId="+this.countryId+"&businessId="+this.$store.state.LoginedUser.userId).then(function(e){if(200==e.data.code){for(var r=e.data.data,o={},n=[],i=0;i<r.length;i++){var s=r[i];if(o[s.productId])for(var u=0;u<n.length;u++){var c=n[u];if(c.productId==s.productId){c._child.push(s);break}}else n.push({productId:s.productId,productModelNumber:s.productModelNumber,countryName:s.countryName,countryId:s.countryId,_child:[s]}),o[s.productId]=s}t.subscriptionList=n}})},_distributionPersonnel:function(t){var e=this;if(t){var r="";for(var o in this.productSelection)r+=this.productSelection[o].productId+",";this.$ajax.put(this.URL_ROOT+"/product-service/userCountryProductRel/listInsert?productList="+r+"&countryId="+this.countryId+"&user_id="+this.userId).then(function(t){if(200===t.data.code)e.$notify({title:"添加成功",type:"success"}),e.addressclick();else{e.$createElement;e.$notify({title:"添加失败"})}})}},_deletePersonnel:function(t){var e=this,r={countryId:t.countryId,productId:t.productId,userId:t.userId};this.$ajax({method:"post",url:this.URL_ROOT+"/product-service/userCountryProductRel/delete",data:r}).then(function(t){if(200===t.data.code)e.$notify({title:"删除成功",type:"success"}),e.addressclick();else{e.$createElement;e.$notify({title:"删除失败"})}})},_productSelection:function(t){this.productSelection=t}}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.subscriptionList,"tooltip-effect":"dark"},on:{"selection-change":t._productSelection}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),r("el-table-column",{attrs:{prop:"countryName",label:"国家",width:"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"productModelNumber",label:"产品名称",width:"220"}}),t._v(" "),r("el-table-column",{attrs:{label:"人员名称"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row._child,function(e){return e.userName?r("el-tag",{key:e.id,attrs:{closable:"",type:"info"},on:{close:function(r){return t._deletePersonnel(e)}}},[t._v("\n                    "+t._s(e.userName)+"\n                    ")]):t._e()})}}])})],1),t._v(" "),r("div",{staticStyle:{"margin-top":"20px"}},[r("el-button",{on:{click:function(e){return t._distributionPersonnel()}}},[t._v("分配")])],1)],1)},staticRenderFns:[]},i=r("VU/8")(o,n,!1,null,null,null);e.default=i.exports}});
//# sourceMappingURL=30.7edc8d8beb41908a9729.js.map
{"version":3,"sources":["webpack:///src/components/department/opts/addPersonnel.vue","webpack:///./src/components/department/opts/addPersonnel.vue?cc3e","webpack:///./src/components/department/opts/addPersonnel.vue"],"names":["addPersonnel","props","data","_this","this","status","roleId","$store","state","LoginedUser","parentDeptIds","formedit","departmentId","userDisplayName","userName","userPassword","roleName","defaultProps","children","label","value","rules","required","message","trigger","department","validator","rule","callback","Error","test","methods","_show","departmentItem","id","personnelList","_addpersonnel","formName","_this2","$refs","validate","valid","$ajax","method","url","URL_ROOT","then","res","code","$message","success","$emit","error","msg","handleChange","items","length","opts_addPersonnel","render","_vm","_h","$createElement","_c","_self","attrs","visible","width","title","departmentName","on","update:visible","$event","ref","model","label-width","prop","expand-trigger","options","departmentArray","change-on-select","show-all-levels","change","$$v","expression","_v","placeholder","$set","_l","item","key","_e","autocomplete","keyup","type","indexOf","_k","keyCode","handleClick","show-password","staticClass","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/43.5cfe420b7bf26cc83974.js","sourcesContent":["<template>\n  <el-dialog\n    :visible.sync=\"status\"\n    :width=\"'400px'\"\n    :title=\"departmentItem.departmentName\"\n  >\n    <el-form :model=\"formedit\" :rules=\"rules\" ref=\"addPersonnel\" :label-width=\"'100px'\">\n      <el-form-item label=\"请选择部门\" prop=\"department\">\n        <el-cascader\n            expand-trigger=\"hover\"\n            :options=\"departmentArray\"\n            :props=\"defaultProps\"\n            v-model=\"parentDeptIds\"\n            :change-on-select=\"true\"\n            :show-all-levels=\"false\"\n            @change=\"handleChange\">\n                </el-cascader>\n      </el-form-item>\n      <el-form-item label=\"请选择职位\" prop=\"roleId\">\n        <el-select v-model=\"formedit.roleId\" placeholder=\"请选择职位\">\n          <el-option\n            v-for=\"item in personnelList\"\n            :key=\"item.roleId\"\n            :label=\"item.roleName\"\n            :value=\"item.roleId\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"formedit.roleId == 0\"  label=\"\" prop=\"roleName\">\n          <el-input v-model=\"formedit.roleName\" placeholder=\"请填写部门名称\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"账号\" prop=\"userName\">\n        <el-input v-model=\"formedit.userName\" autocomplete=\"off\" @keyup.enter=\"handleClick\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"userPassword\">\n        <el-input v-model=\"formedit.userPassword\" autocomplete=\"off\" show-password></el-input>\n      </el-form-item>\n      <el-form-item label=\"姓名\" prop=\"userDisplayName\">\n        <el-input v-model=\"formedit.userDisplayName\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"_show\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"_addpersonnel('addPersonnel')\">确 定</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\nconst ERR_OK = 200;\nexport default {\n  props: [\"groupId\", \"personnelList\", \"departmentItem\",\"departmentArray\"],\n  data() {\n    // 是否有中文\n    var validatePass = (rule, value, callback) => {\n      let reg = /[\\u4E00-\\u9FA5]/;\n      if (reg.test(value)) {\n        callback(new Error(\"账号不能有中文\"));\n      } else {\n        callback();\n      }\n    };\n    var validatePass1 = (rule, value, callback) => {\n      if(this.formedit.departmentId == 0){\n        callback(new Error(\"请选择部门\"));\n      }else{\n        callback();\n      }\n    };\n    return {\n      status: false,\n      roleId: this.$store.state.LoginedUser.roleId,\n      parentDeptIds: [],\n      formedit: {\n        departmentId: \"\",\n        userDisplayName: \"\",\n        userName: \"\",\n        userPassword: \"\",\n        roleId: \"\",\n        roleName: ''\n      },\n      defaultProps: {\n          children: \"childern\",\n          label: \"departmentName\",\n          value: 'id'\n      },\n      rules: {\n        userDisplayName: [\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" }\n        ],\n        department: [\n          { validator: validatePass1, trigger: \"blur\" }\n        ],\n        userPassword: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" }\n        ],\n        userName: [\n          { required: true, message: \"请输入账号\", trigger: \"blur\" },\n          { validator: validatePass, trigger: \"blur\" }\n        ],\n        roleId: [{ required: true, message: \"请选择职位\", trigger: \"blur\" }],\n        roleName: [\n            { required: true, message: \"请填写职位名称\", trigger: \"blur\" },\n        ]\n      }\n    };\n  },\n  methods: {\n    _show() {\n      this.status = this.status ? false : true;\n      if (this.status == true) {\n        this.formedit.departmentId = this.departmentItem.id;\n        this.formedit.roleId = this.personnelList[0].roleId;\n        this.parentDeptIds = this.departmentItem.parentDeptIds\n      }\n    },\n    // 添加人员\n    _addpersonnel(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.$ajax({\n            method: \"post\",\n            url: this.URL_ROOT + \"/login-service/users/addUsers\",\n            data: this.formedit\n          }).then(res => {\n            if (res.data.code == ERR_OK) {\n              this.$message.success(\"新增人员成功\");\n              this.$emit(\"success\");\n              this.status = false;\n              this.formedit.userDisplayName = \"\";\n              this.formedit.userName = \"\";\n              this.formedit.userPassword = \"\";\n            } else {\n              this.$message.error(res.data.msg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 拿到最后一个部门ID\n    handleChange(items){\n        this.formedit.departmentId = items[items.length-1]\n    }\n  }\n};\n</script>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/department/opts/addPersonnel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.status,\"width\":'400px',\"title\":_vm.departmentItem.departmentName},on:{\"update:visible\":function($event){_vm.status=$event}}},[_c('el-form',{ref:\"addPersonnel\",attrs:{\"model\":_vm.formedit,\"rules\":_vm.rules,\"label-width\":'100px'}},[_c('el-form-item',{attrs:{\"label\":\"请选择部门\",\"prop\":\"department\"}},[_c('el-cascader',{attrs:{\"expand-trigger\":\"hover\",\"options\":_vm.departmentArray,\"props\":_vm.defaultProps,\"change-on-select\":true,\"show-all-levels\":false},on:{\"change\":_vm.handleChange},model:{value:(_vm.parentDeptIds),callback:function ($$v) {_vm.parentDeptIds=$$v},expression:\"parentDeptIds\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"请选择职位\",\"prop\":\"roleId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择职位\"},model:{value:(_vm.formedit.roleId),callback:function ($$v) {_vm.$set(_vm.formedit, \"roleId\", $$v)},expression:\"formedit.roleId\"}},_vm._l((_vm.personnelList),function(item){return _c('el-option',{key:item.roleId,attrs:{\"label\":item.roleName,\"value\":item.roleId}})}),1)],1),_vm._v(\" \"),(_vm.formedit.roleId == 0)?_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写部门名称\"},model:{value:(_vm.formedit.roleName),callback:function ($$v) {_vm.$set(_vm.formedit, \"roleName\", $$v)},expression:\"formedit.roleName\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleClick($event)}},model:{value:(_vm.formedit.userName),callback:function ($$v) {_vm.$set(_vm.formedit, \"userName\", $$v)},expression:\"formedit.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"userPassword\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"show-password\":\"\"},model:{value:(_vm.formedit.userPassword),callback:function ($$v) {_vm.$set(_vm.formedit, \"userPassword\", $$v)},expression:\"formedit.userPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"userDisplayName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.formedit.userDisplayName),callback:function ($$v) {_vm.$set(_vm.formedit, \"userDisplayName\", $$v)},expression:\"formedit.userDisplayName\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm._show}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm._addpersonnel('addPersonnel')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18f8a227\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/department/opts/addPersonnel.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addPersonnel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addPersonnel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18f8a227\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addPersonnel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/department/opts/addPersonnel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
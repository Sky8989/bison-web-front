{"version":3,"sources":["webpack:///./src/components/product/detail/Document.vue?4fe7","webpack:///./src/components/product/detail/Document.vue","webpack:///src/components/product/detail/Document.vue"],"names":["detail_Document","render","_vm","this","_h","$createElement","_c","_self","attrs","id","gutter","span","name","staticStyle","display","width","on","click","$event","chooseDocType","_v","margin-left","ref","staticClass","height","multiple","limit","on-exceed","uploadExceed","action","before-upload","beforeUploadPicture","on-preview","handlePreview","on-remove","handleRemove","on-success","onSuccess","on-error","uploadError","file-list","fileList","auto-upload","data","params","size","type","slot","visible","dialogVisible","update:visible","src","dialogImageUrl","alt","padding","submitUpload","download","deleteDialog","title","delShowDocList","delDocs","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Document","__webpack_exports__","uploadComplete","productId","typeId","fileType","HOST","docTypeId","delDocList","methods","init","console","log","buttonChecked","searchDocument","$store","state","product","_this","$message","url","URL_ROOT","URL_PREFIX","$ajax","method","then","res","code","catch","error","file","warning","length","push","productDocumentId","err","msg","$refs","upload","submit","parseInt","toString","split","$","css","siblings","flag","_this2","fileIds","qs","stringify","success","imgTypeId","_this3","uploadFiles","$confirm","confirmButtonText","cancelButtonText","downloadDocment","_this4","ids","index","get","status","open","request","responseURL"],"mappings":"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","file":"static/js/20.a0210f997fe109cec424.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"Document\"}},[_c('el-row',{attrs:{\"gutter\":5}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-col',{attrs:{\"span\":4,\"name\":\"docType\"}},[_c('el-button',{staticStyle:{\"display\":\"block\",\"width\":\"130px\"},attrs:{\"id\":\"docType-1\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-1')}}},[_vm._v(\"产品listing文案\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-2\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-2')}}},[_vm._v(\"产品定义文档\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-3\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-3')}}},[_vm._v(\"认证文件\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-4\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-4')}}},[_vm._v(\"结构文件\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-5\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-5')}}},[_vm._v(\"立项资料\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-6\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-6')}}},[_vm._v(\"申述文件\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"docType-7\"},on:{\"click\":function($event){return _vm.chooseDocType('docType-7')}}},[_vm._v(\"其他\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":16,\"name\":\"docList\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",staticStyle:{\"height\":\"auto\"},attrs:{\"name\":\"files\",\"multiple\":\"\",\"limit\":10,\"on-exceed\":_vm.uploadExceed,\"action\":_vm.action,\"before-upload\":_vm.beforeUploadPicture,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.onSuccess,\"on-error\":_vm.uploadError,\"file-list\":_vm.fileList,\"auto-upload\":false,\"data\":_vm.params}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"选择文件\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_c('b',[_vm._v(\"请先选择要上传的文档,再确认上传,上传文档!\")])])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)],1),_vm._v(\" \"),_c('el-col',{staticStyle:{\"padding\":\"230px 0px 0px 0px\"},attrs:{\"span\":4,\"name\":\"option\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"上传\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.download}},[_vm._v(\"下载\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.deleteDialog = true}}},[_vm._v(\"删除\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"需要删除以下文档\",\"visible\":_vm.deleteDialog,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.deleteDialog=$event}}},[_c('el-upload',{staticStyle:{\"height\":\"auto\"},attrs:{\"action\":_vm.action,\"auto-upload\":false,\"file-list\":_vm.delShowDocList}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.delDocs(false)}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.delDocs(true)}}},[_vm._v(\"确定删除\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f4a58448\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/detail/Document.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f4a58448\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Document.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Document.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Document.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f4a58448\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Document.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f4a58448\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/detail/Document.vue\n// module id = null\n// module chunks = ","<template>\n    <div id=\"Document\">\n      <el-row :gutter=\"5\" >\n\n        <el-col :span=\"20\">\n\n          <el-col :span=\"4\" name=\"docType\" >\n\n            <el-button id=\"docType-1\" style=\"display: block; width: 130px\" @click=\"chooseDocType('docType-1')\">产品listing文案</el-button>\n            <el-button id=\"docType-2\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-2')\">产品定义文档</el-button>\n            <el-button id=\"docType-3\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-3')\">认证文件</el-button>\n            <el-button id=\"docType-4\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-4')\">结构文件</el-button>\n            <el-button id=\"docType-5\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-5')\">立项资料</el-button>\n            <el-button id=\"docType-6\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-6')\">申述文件</el-button>\n            <el-button id=\"docType-7\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseDocType('docType-7')\">其他</el-button>\n\n          </el-col>\n\n          <el-col :span=\"16\" name=\"docList\">\n            <el-upload\n              ref=\"upload\"\n              name=\"files\"\n              class=\"upload-demo\"\n              multiple :limit=\"10\"\n              :on-exceed=\"uploadExceed\"\n              :action=\"action\"\n              :before-upload=\"beforeUploadPicture\"\n              :on-preview=\"handlePreview\"\n              :on-remove=\"handleRemove\"\n              :on-success=\"onSuccess\"\n              :on-error=\"uploadError\"\n              :file-list=\"fileList\"\n              :auto-upload=\"false\"\n              :data=\"params\"\n              style=\"height: auto\">\n              <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\"><b>请先选择要上传的文档,再确认上传,上传文档!</b></div>\n            </el-upload>\n\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n\n          </el-col>\n        </el-col>\n\n        <el-col :span=\"4\" name=\"option\" style=\"padding: 230px 0px 0px 0px\">\n          <el-button size=\"small\" type=\"primary\" @click=\"submitUpload\">上传</el-button>\n          <el-button size=\"small\" @click=\"download\">下载</el-button>\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteDialog = true\">删除</el-button>\n        </el-col>\n\n      </el-row>\n\n\n\n      <el-dialog\n        title=\"需要删除以下文档\"\n        :visible.sync=\"deleteDialog\"\n        width=\"80%\">\n        <el-upload\n          :action=\"action\"\n          :auto-upload=\"false\"\n          :file-list=\"delShowDocList\"\n          style=\"height: auto\">\n        </el-upload>\n\n        <el-dialog :visible.sync=\"dialogVisible\">\n          <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n        </el-dialog>\n\n        <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"delDocs(false)\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"delDocs(true)\">确定删除</el-button>\n      </span>\n      </el-dialog>\n\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: \"Document\",\n      data(){\n          return{\n            deleteDialog:false,\n            dialogVisible:false,\n            uploadComplete:false, //上传完成的状态\n            dialogImageUrl:'',\n            params:{\n              productId:0,\n              typeId:1, //默认为第一个\n            },\n\n            fileType:'DOCUMENT',\n            action:this.HOST + \"/productFile/saveFiles\",\n            docTypeId:1,\n            delShowDocList:[], //删除 文件展示列表\n            delDocList:[], //删除文档id列表\n            fileList: [],\n\n          }\n      },\n      methods:{\n          init(){\n            console.log(\"doc init method\")\n\n            this.buttonChecked('docType-1')\n            this.searchDocument(this.$store.state.product.productId,this.docTypeId)\n          },\n        searchDocument(productId,typeId){\n\n          if(productId == null || productId == ''){\n            this.$message(\"请先选择产品\")\n            return false\n          }\n\n          //查询前先初始化\n          this.fileList = []\n          this.delShowDocList = []\n          this.delDocList = []\n\n          var data = {\n            productId:productId,\n            typeId:typeId,\n            fileType:this.fileType,\n          }\n\n          var url = this.URL_ROOT + this.URL_PREFIX + \"/productFile/findByProductIdAndTypeId\"\n          this.$ajax({\n            method:'get',\n            url:url,\n            params:data,\n\n          }).then(res => {\n            if(res.data.code == \"200\"){\n              //渲染图片\n              console.log(res.data)\n              this.fileList = res.data.data\n\n            }\n          }).catch(error =>{\n            console.error(error)\n          })\n\n        },\n        uploadExceed(file,fileList){\n          console.log(\"uploadExceed\")\n          this.$message.warning(`当前限制选择 10 个文件，本次选择了 ${file.length} 个文件，共选择了 ${file.length + fileList.length} 个文件`);\n\n        },\n        handleRemove(file, fileList){\n          console.log(\"移除文档\")\n          console.log(file);\n          this.delDocList.push(file.productDocumentId)\n          var data = {url : file.url,name:file.name,id:file.productDocumentId}\n          this.delShowDocList.push(data)\n\n          console.log(this.delDocList)\n          console.log(this.delShowDocList)\n        },\n        handlePreview(file){\n          console.log(\"图片预览\")\n          console.log(file.url);\n          console.log(file.name);\n         /* this.dialogImageUrl = file.url;\n          this.dialogVisible = true;*/\n        },\n        uploadError(err, file, fileList) {\n          this.$message.error(\"上传出错,请重新上传\" + err);\n        },\n        onSuccess:function(res,file,fileList){\n          console.log(\"文档上传成功后，后台返回文档的路径\")\n          console.log(res.data)\n          if(res.code == \"200\"){\n\n            this.$message(res.msg)\n            this.fileList = res.data\n\n          }\n          this.uploadComplete = true;\n          // this.fileChange(fileList)\n        },\n        submitUpload() {\n          console.log(\"提交\")\n          this.$refs.upload.submit();\n        },\n        beforeUploadPicture(file) {\n          console.log(\"上传图片前调用方法\")\n          console.log(file)\n          this.params.productId = this.$store.state.product.productId\n        },\n        chooseDocType(id){\n            console.log(id)\n            this.buttonChecked(id)\n\n            //id 进行格式处理\n            var typeId = parseInt(id.toString().split(\"-\")[1])\n            console.log(typeId)\n\n            //每次改变类型进行赋值\n            this.params.typeId = typeId\n            this.docTypeId = typeId\n\n          this.searchDocument(this.$store.state.product.productId,this.docTypeId)\n        },\n        buttonChecked(id){\n          $(\"#\"+id).css(\"background-color\",\"#409efb\").css(\"color\",\"#FFF\")\n          $(\"#\"+id).siblings().css(\"background-color\",\"#FFF\").css(\"color\",\"#606266\")\n\n        },\n        delDocs(flag){\n\n          if(this.delDocList == null || this.delDocList.length == 0){\n            this.$message.warning(\"请先选择需要删除的文档\")\n            this.deleteDialog = false\n            return false;\n          }\n\n          this.deleteDialog = true\n\n          console.log(this.delShowDocList.toString())\n          console.log(this.delDocList.toString())\n          if(flag){ //删除操作\n            var url = this.URL_ROOT + this.URL_PREFIX + \"/productFile/dropFiles\"\n            var data = {\n              fileIds:this.delDocList.toString(),\n              fileType:this.fileType,\n            }\n\n            console.log(\"需要删除的文档 类型 \")\n            console.log(data.fileType)\n            this.$ajax({\n              method:'post',\n              url:url,\n              data: this.qs.stringify(data),\n\n            }).then(res => {\n              if(res.data.code == \"200\"){\n                console.log(res.data.data)\n                //删除成功后返回 剩下的数据\n                this.fileList = res.data.data\n                this.$message.success(\"删除成功\")\n              }\n            }).catch(error => {\n              console.log(error)\n            })\n\n\n          }else{  //取消删除\n            this.searchDocument(this.$store.state.product.productId,this.imgTypeId)\n          }\n          //清除删除list\n          this.delDocList = []\n          this.delShowDocList = []\n\n          this.deleteDialog = false\n\n        },\n        download(){\n          console.log(\"download\")\n          //包含上传的文件信息和服务端返回的所有信息都在这个对象里\n          console.log(this.$refs.upload.uploadFiles)\n\n          this.$confirm('确定下载？', '提示', {\n            confirmButtonText: '确定下载',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            this.downloadDocment()\n          });\n\n        },\n        downloadDocment(){\n        var ids = []\n        var uploadFiles = this.$refs.upload.uploadFiles\n\n        for(var index in uploadFiles){\n          var id = uploadFiles[index].productDocumentId;\n          ids.push(id)\n        }\n\n        console.log(ids)\n\n        var url = this.URL_ROOT + this.URL_PREFIX + \"/productFileDownload/zipDownload\"\n        this.$ajax.get(url,{\n            params:{\n              'ids':ids.toString(),\n              'type':this.fileType\n            }\n          }\n\n        ).then(res => {\n          if(res.status == 200){\n            //下载\n            open(res.request.responseURL)\n\n            this.$message(res.data.data)\n          }\n        }).catch(error => {\n          this.$message.error(error)\n        })\n\n      }\n\n      }\n    }\n</script>\n\n<style scoped>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/product/detail/Document.vue"],"sourceRoot":""}
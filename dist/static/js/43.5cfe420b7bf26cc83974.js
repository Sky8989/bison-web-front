webpackJsonp([43],{HWMF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["groupId","personnelList","departmentItem","departmentArray"],data:function(){var e=this;return{status:!1,roleId:this.$store.state.LoginedUser.roleId,parentDeptIds:[],formedit:{departmentId:"",userDisplayName:"",userName:"",userPassword:"",roleId:"",roleName:""},defaultProps:{children:"childern",label:"departmentName",value:"id"},rules:{userDisplayName:[{required:!0,message:"请输入姓名",trigger:"blur"}],department:[{validator:function(t,r,s){0==e.formedit.departmentId?s(new Error("请选择部门")):s()},trigger:"blur"}],userPassword:[{required:!0,message:"请输入密码",trigger:"blur"}],userName:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:function(e,t,r){/[\u4E00-\u9FA5]/.test(t)?r(new Error("账号不能有中文")):r()},trigger:"blur"}],roleId:[{required:!0,message:"请选择职位",trigger:"blur"}],roleName:[{required:!0,message:"请填写职位名称",trigger:"blur"}]}}},methods:{_show:function(){this.status=!this.status,1==this.status&&(this.formedit.departmentId=this.departmentItem.id,this.formedit.roleId=this.personnelList[0].roleId,this.parentDeptIds=this.departmentItem.parentDeptIds)},_addpersonnel:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$ajax({method:"post",url:t.URL_ROOT+"/login-service/users/addUsers",data:t.formedit}).then(function(e){200==e.data.code?(t.$message.success("新增人员成功"),t.$emit("success"),t.status=!1,t.formedit.userDisplayName="",t.formedit.userName="",t.formedit.userPassword=""):t.$message.error(e.data.msg)})})},handleChange:function(e){this.formedit.departmentId=e[e.length-1]}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.status,width:"400px",title:e.departmentItem.departmentName},on:{"update:visible":function(t){e.status=t}}},[r("el-form",{ref:"addPersonnel",attrs:{model:e.formedit,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"请选择部门",prop:"department"}},[r("el-cascader",{attrs:{"expand-trigger":"hover",options:e.departmentArray,props:e.defaultProps,"change-on-select":!0,"show-all-levels":!1},on:{change:e.handleChange},model:{value:e.parentDeptIds,callback:function(t){e.parentDeptIds=t},expression:"parentDeptIds"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"请选择职位",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.formedit.roleId,callback:function(t){e.$set(e.formedit,"roleId",t)},expression:"formedit.roleId"}},e._l(e.personnelList,function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1),e._v(" "),0==e.formedit.roleId?r("el-form-item",{attrs:{label:"",prop:"roleName"}},[r("el-input",{attrs:{placeholder:"请填写部门名称"},model:{value:e.formedit.roleName,callback:function(t){e.$set(e.formedit,"roleName",t)},expression:"formedit.roleName"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"账号",prop:"userName"}},[r("el-input",{attrs:{autocomplete:"off"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleClick(t)}},model:{value:e.formedit.userName,callback:function(t){e.$set(e.formedit,"userName",t)},expression:"formedit.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"userPassword"}},[r("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.formedit.userPassword,callback:function(t){e.$set(e.formedit,"userPassword",t)},expression:"formedit.userPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"userDisplayName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.formedit.userDisplayName,callback:function(t){e.$set(e.formedit,"userDisplayName",t)},expression:"formedit.userDisplayName"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e._show}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e._addpersonnel("addPersonnel")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]},o=r("VU/8")(s,a,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=43.5cfe420b7bf26cc83974.js.map
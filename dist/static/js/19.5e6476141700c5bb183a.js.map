{"version":3,"sources":["webpack:///src/components/product/detail/Image.vue","webpack:///./src/components/product/detail/Image.vue?5cfe","webpack:///./src/components/product/detail/Image.vue"],"names":["__webpack_exports__","name","data","multiple","fileType","deleteDialog","delImgList","delShowImgList","imgTypeId","dialogImageUrl","dialogVisible","params","productId","typeId","imageUrl","action","this","URL_ROOT","URL_PREFIX","uploadComplete","imgVisible","photo","fileList","methods","init","console","log","buttonChecked","searchImg","$store","state","product","_this","$message","url","$ajax","method","then","res","code","catch","error","submitUpload","$refs","upload","submit","handleRemove","file","push","productImgId","id","beforeUploadPicture","uploadError","err","stack","onSuccess","imgList","handlePictureCardPreview","uploadExceed","warning","length","chooseImgType","parseInt","toString","split","$","css","siblings","delImgs","flag","_this2","fileIds","qs","stringify","success","download","_this3","uploadFiles","$confirm","confirmButtonText","cancelButtonText","type","downloadIamge","_this4","ids","index","get","request","responseURL","status","open","detail_Image","render","_vm","_h","$createElement","_c","_self","attrs","target","encType","gutter","span","staticStyle","display","width","on","click","$event","_v","margin-left","staticClass","ref","height","limit","on-exceed","before-upload","on-preview","on-remove","on-success","on-error","auto-upload","file-list","list-type","visible","update:visible","src","alt","padding","size","title","slot","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Image"],"mappings":"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","file":"static/js/19.5e6476141700c5bb183a.js","sourcesContent":["<template>\n  <div >\n    <form method=\"post\" target=\"upload\" action=\"\" encType=\"multipart/form-data\">\n    <el-row :gutter=\"5\" >\n\n\n      <el-col :span=\"20\">\n\n        <el-col :span=\"3\" name=\"imgType\" >\n\n          <el-button id=\"imgType-1\" style=\"display: block; width: 130px\" @click=\"chooseImgType('imgType-1')\">橱窗图</el-button>\n          <el-button id=\"imgType-2\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-2')\">EBC</el-button>\n          <el-button id=\"imgType-3\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-3')\">品牌推广图</el-button>\n          <el-button id=\"imgType-4\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-4')\" >实物图</el-button>\n          <el-button id=\"imgType-5\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-5')\">包装图片</el-button>\n          <el-button id=\"imgType-6\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-6')\">说明书图片</el-button>\n          <el-button id=\"imgType-7\" style=\"display: block;margin-left: 0px;width: 130px\" @click=\"chooseImgType('imgType-7')\" >其他</el-button>\n\n        </el-col>\n\n\n        <el-col :span=\"16\" name=\"imgList\" >\n          <div  class=\"el-upload__tip\"><b>请先选择要上传的图片,再确认上传,上传图片!</b></div>\n          <!--  multiple :limit=\"5\"-->\n          <el-upload\n            class=\"upload-demo\"\n            ref=\"upload\"\n            name=\"files\"\n            multiple\n            :limit=\"10\"\n            :on-exceed=\"uploadExceed\"\n            :before-upload=\"beforeUploadPicture\"\n            :on-preview=\"handlePictureCardPreview\"\n            :on-remove=\"handleRemove\"\n            :on-success=\"onSuccess\"\n            :on-error=\"uploadError\"\n            :action=\"action\"\n            :auto-upload=\"false\"\n            :file-list=\"fileList\"\n            :data=\"params\"\n            list-type=\"picture-card\" style=\"height: auto\">\n            <i class=\"el-icon-plus\"></i>\n\n          </el-upload>\n\n          <el-dialog :visible.sync=\"dialogVisible\">\n\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n          </el-dialog>\n\n        </el-col>\n      </el-col>\n\n      <el-col :span=\"4\" name=\"option\" style=\"padding: 230px 0px 0px 0px\">\n        <!--<el-button size=\"\" type=\"primary\">上传图片</el-button>-->\n        <el-button size=\"small\" type=\"primary\" @click=\"submitUpload\">点击上传</el-button>\n        <el-button size=\"small\" @click=\"download\">下载</el-button>\n        <el-button size=\"small\" type=\"danger\" @click=\"deleteDialog = true\">删除</el-button>\n      </el-col>\n    </el-row>\n    </form>\n\n\n\n    <el-dialog\n      title=\"需要删除以下图片\"\n      :visible.sync=\"deleteDialog\"\n      width=\"80%\">\n      <el-upload\n        name=\"file\"\n        multiple\n        :limit=\"10\"\n        :on-exceed=\"uploadExceed\"\n\n        :on-remove=\"handleRemove\"\n        :on-success=\"onSuccess\"\n        :action=\"action\"\n        :auto-upload=\"false\"\n        :file-list=\"delShowImgList\"\n        list-type=\"picture-card\" style=\"height: auto\">\n      </el-upload>\n\n     <!-- <el-dialog :visible.sync=\"dialogVisible\">\n        <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n      </el-dialog>-->\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"delImgs(false)\">取 消</el-button>\n    <el-button type=\"primary\" @click=\"delImgs(true)\">确定删除</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n\n\n\n\n</template>\n\n<script>\n\n\n    export default {\n        name: \"images\",\n      data(){\n          return{\n            multiple:true,\n            fileType:'IMAGE',\n            deleteDialog:false, //是否显示删除对话框\n            delImgList:[],      //删除图片的id列表\n            delShowImgList:[],  //删除图片展示列表\n            imgTypeId:1,        //默认为第一个\n            dialogImageUrl: '', // 图片预览地址\n            dialogVisible:false,\n            params:{\n                    productId:0,\n                    typeId:1, //默认为第一个\n            },\n            imageUrl: '',\n            action:this.URL_ROOT + this.URL_PREFIX + \"/productFile/saveFiles\",\n            uploadComplete: true, // 图片上传完成状态\n            imgVisible: false, // 上传图片预览\n\n            photo: '',  // 活动图片\n            fileList: []\n          }\n      },\n\n      methods:{\n        init(){\n          console.log(\"img init method\")\n          //第一次进去默认选中一个\n          this.buttonChecked(\"imgType-1\")\n          this.searchImg(this.$store.state.product.productId,this.imgTypeId)\n\n        },\n        searchImg(productId,typeId){\n\n          //查询前先初始化\n          this.fileList = []\n          this.delShowImgList = []\n          this.delImgList = []\n\n\n          if(productId == null || productId == ''){\n            this.$message(\"请先选择产品\")\n            return false\n          }\n\n          var data = {\n            'productId':productId,\n            'typeId':typeId,\n            'fileType':this.fileType,\n          }\n          console.log(data.fileType)\n\n          var url = this.URL_ROOT + this.URL_PREFIX + \"/productFile/findByProductIdAndTypeId\"\n          this.$ajax({\n            method:'get',\n            url:url,\n            params:data,\n\n          }).then(res => {\n            if(res.data.code == \"200\"){\n              //渲染图片\n              // this.fileList = res.data.data\n              this.fileList = res.data.data\n            //  $(\".upload-demo ul\").show()\n\n            }\n          }).catch(error =>{\n            console.error(error)\n          })\n        },\n        submitUpload() {\n\n          this.$refs.upload.submit();\n\n        },\n        // 移除图片\n        handleRemove(file, fileList){\n          console.log(\"移除图片\")\n          console.log(file);\n          //将需要删除图片 存入list中\n          this.delImgList.push(file.productImgId)\n          var data = {url : file.url,id:file.productImgId}\n          this.delShowImgList.push(data)\n\n         console.log(this.delImgList)\n         console.log(this.delShowImgList)\n\n          // this.fileChange(fileList);\n        },\n        // 上传图片前调用方法\n        beforeUploadPicture(file) {\n          console.log(\"上传图片前调用方法\")\n          console.log(file)\n          this.params.productId = this.$store.state.product.productId\n        },\n        // 上传图片出错\n        uploadError(err, file, fileList) {\n          if (err) {\n            console.log(err.stack);\n          }\n          this.$message.error(\"上传出错,请重新上传\");\n        },\n        // 图片上传成功后，后台返回图片的路径\n      onSuccess:function(res,file,fileList){\n          console.log(\"图片上传成功后，后台返回图片的路径\")\n          console.log(fileList)\n\n        if(res.code == \"200\"){\n          var imgList = res.data\n          console.log(imgList)\n          this.fileList = imgList\n\n          console.log(this.fileList)\n\n        }\n        this.uploadComplete = true;\n\n       // this.fileChange(fileList)\n        },\n\n        // 图片预览\n        handlePictureCardPreview(file) {\n          console.log(\"图片预览\")\n          this.dialogImageUrl = file.url;\n          this.dialogVisible = true;\n\n\n        },\n        uploadExceed(file,fileList){\n          console.log(\"uploadExceed\")\n          this.$message.warning(`当前限制选择 10 个文件，本次选择了 ${file.length} 个文件，共选择了 ${file.length + fileList.length} 个文件`);\n\n        },\n        chooseImgType(id){\n          console.log(id)\n          //id 进行格式处理\n          var typeId = parseInt(id.toString().split(\"-\")[1])\n\n          console.log(typeId)\n\n          //切换时清除\n         // this.$refs.upload.clearFiles()\n          //每次点击高亮 其他兄弟节点失去高亮\n          this.buttonChecked(id)\n\n          //每次改变类型进行赋值\n          this.params.typeId = typeId\n          this.imgTypeId = typeId\n\n          this.searchImg(this.$store.state.product.productId,typeId)\n        },\n        buttonChecked(id){\n          $(\"#\"+id).css(\"background-color\",\"#409efb\").css(\"color\",\"#FFF\")\n          $(\"#\"+id).siblings().css(\"background-color\",\"#FFF\").css(\"color\",\"#606266\")\n\n        },\n        delImgs(flag){\n\n          console.log(this.delImgList)\n          if(this.delImgList == null || this.delImgList.length == 0){\n            this.$message.warning(\"请先选择需要删除的图片\")\n            this.deleteDialog = false\n            return false;\n          }\n\n          this.deleteDialog = true\n\n          console.log(this.delShowImgList.toString())\n          if(flag){ //删除操作\n            var url = this.URL_ROOT + this.URL_PREFIX + \"/productFile/dropFiles\"\n            var data = {\n              fileIds:this.delImgList.toString(),\n              fileType:this.fileType,\n            }\n\n            console.log(\"需要删除的图片 类型 \")\n            console.log(data.fileType)\n            this.$ajax({\n              method:'post',\n              url:url,\n              data: this.qs.stringify(data),\n\n            }).then(res => {\n              if(res.data.code == \"200\"){\n                console.log(res.data.data)\n                //删除成功后返回 剩下的数据\n                this.fileList = res.data.data\n                this.$message.success(\"删除成功\")\n              }\n            }).catch(error => {\n              console.log(error)\n            })\n\n\n          }else{  //取消删除\n            this.searchImg(this.$store.state.product.productId,this.imgTypeId)\n          }\n          //清除删除list\n          this.delImgList = []\n          this.delShowImgList = []\n\n          this.deleteDialog = false\n\n        },\n        download(){\n          //包含上传的文件信息和服务端返回的所有信息都在这个对象里\n          console.log(this.$refs.upload.uploadFiles)\n\n\n          this.$confirm('确定下载？,', '提示', {\n           confirmButtonText: '确定下载',\n           cancelButtonText: '取消',\n           type: 'warning'\n         }).then(() => {\n           this.downloadIamge();\n         });\n\n        },\n        downloadIamge(){\n\n          var uploadFiles = this.$refs.upload.uploadFiles\n          // var ids = new Array(uploadFiles.length)\n          var ids = []\n          for(var index in uploadFiles){\n            var id = uploadFiles[index].productImgId;\n            // ids[index] = id\n              ids.push(id)\n          }\n\n          console.log(ids)\n\n          var url = this.URL_ROOT + this.URL_PREFIX + \"/productFileDownload/zipDownload\"\n          this.$ajax.get(url,{\n              params:{\n                ids:ids.toString(),\n                type:this.fileType\n              }\n            }\n\n          ).then(res => {\n\n            console.log(res)\n            console.log(res.request.responseURL)\n\n            if(res.status == 200){\n\n              //下载\n              open(res.request.responseURL)\n\n              this.$message(res.data.data)\n\n            }\n          }).catch(error => {\n            this.$message.error(error)\n          })\n\n        }\n\n      }\n\n\n    }\n</script>\n\n<style scoped>\n\n  /*.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }*/\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/product/detail/Image.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('form',{attrs:{\"method\":\"post\",\"target\":\"upload\",\"action\":\"\",\"encType\":\"multipart/form-data\"}},[_c('el-row',{attrs:{\"gutter\":5}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-col',{attrs:{\"span\":3,\"name\":\"imgType\"}},[_c('el-button',{staticStyle:{\"display\":\"block\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-1\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-1')}}},[_vm._v(\"橱窗图\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-2\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-2')}}},[_vm._v(\"EBC\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-3\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-3')}}},[_vm._v(\"品牌推广图\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-4\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-4')}}},[_vm._v(\"实物图\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-5\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-5')}}},[_vm._v(\"包装图片\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-6\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-6')}}},[_vm._v(\"说明书图片\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"display\":\"block\",\"margin-left\":\"0px\",\"width\":\"130px\"},attrs:{\"id\":\"imgType-7\"},on:{\"click\":function($event){return _vm.chooseImgType('imgType-7')}}},[_vm._v(\"其他\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":16,\"name\":\"imgList\"}},[_c('div',{staticClass:\"el-upload__tip\"},[_c('b',[_vm._v(\"请先选择要上传的图片,再确认上传,上传图片!\")])]),_vm._v(\" \"),_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",staticStyle:{\"height\":\"auto\"},attrs:{\"name\":\"files\",\"multiple\":\"\",\"limit\":10,\"on-exceed\":_vm.uploadExceed,\"before-upload\":_vm.beforeUploadPicture,\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.onSuccess,\"on-error\":_vm.uploadError,\"action\":_vm.action,\"auto-upload\":false,\"file-list\":_vm.fileList,\"data\":_vm.params,\"list-type\":\"picture-card\"}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)],1),_vm._v(\" \"),_c('el-col',{staticStyle:{\"padding\":\"230px 0px 0px 0px\"},attrs:{\"span\":4,\"name\":\"option\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.download}},[_vm._v(\"下载\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.deleteDialog = true}}},[_vm._v(\"删除\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"需要删除以下图片\",\"visible\":_vm.deleteDialog,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.deleteDialog=$event}}},[_c('el-upload',{staticStyle:{\"height\":\"auto\"},attrs:{\"name\":\"file\",\"multiple\":\"\",\"limit\":10,\"on-exceed\":_vm.uploadExceed,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.onSuccess,\"action\":_vm.action,\"auto-upload\":false,\"file-list\":_vm.delShowImgList,\"list-type\":\"picture-card\"}}),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.delImgs(false)}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.delImgs(true)}}},[_vm._v(\"确定删除\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73e32f90\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/detail/Image.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73e32f90\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Image.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Image.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Image.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73e32f90\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Image.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-73e32f90\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/detail/Image.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
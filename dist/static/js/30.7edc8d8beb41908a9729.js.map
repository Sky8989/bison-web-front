{"version":3,"sources":["webpack:///src/components/user/opts/subscriptionPersonnelTable.vue","webpack:///./src/components/user/opts/subscriptionPersonnelTable.vue?bd9c","webpack:///./src/components/user/opts/subscriptionPersonnelTable.vue"],"names":["subscriptionPersonnelTable","props","data","subscriptionList","productSelection","methods","_personnelList","_this","this","$ajax","get","URL_ROOT","countryId","$store","state","LoginedUser","userId","then","res","code","arr","map","dest","i","length","a","productId","j","dj","_child","push","productModelNumber","countryName","_distributionPersonnel","rows","_this2","put","$notify","title","type","addressclick","$createElement","_deletePersonnel","val","_this3","method","url","_productSelection","opts_subscriptionPersonnelTable","render","_vm","_h","_c","_self","ref","staticStyle","width","attrs","tooltip-effect","on","selection-change","_v","prop","label","scopedSlots","_u","key","fn","scope","_l","row","item","id","closable","close","$event","_s","userName","_e","margin-top","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/30.7edc8d8beb41908a9729.js","sourcesContent":["<template>\n    <div>\n        <el-table\n            ref=\"multipleTable\"\n            :data=\"subscriptionList\"\n            tooltip-effect=\"dark\"\n            style=\"width: 100%\"\n            @selection-change=\"_productSelection\">\n                <el-table-column type=\"selection\" width=\"55\">\n                </el-table-column>\n                <el-table-column\n                prop=\"countryName\"\n                label=\"国家\"\n                width=\"120\">\n                </el-table-column>\n                <el-table-column\n                prop=\"productModelNumber\"\n                label=\"产品名称\"\n                width=\"220\">\n                </el-table-column>\n                <el-table-column\n                label=\"人员名称\"\n                >\n                    <template slot-scope=\"scope\" type=\"info\">\n                        <el-tag closable v-for=\"item in scope.row._child\" v-if=\"item.userName\" type=\"info\" @close=\"_deletePersonnel(item)\" :key=\"item.id\">\n                        {{item.userName}}\n                        </el-tag>\n                    </template>\n                </el-table-column>\n        </el-table>\n        <div style=\"margin-top: 20px\">\n            <el-button @click=\"_distributionPersonnel()\">分配</el-button>\n        </div>\n    </div>\n</template>\n<script>\n    const ERR_OK = 200\n    export default {\n        props: ['countryId'],\n        data(){\n            return {\n                subscriptionList: [],\n                productSelection: []\n            }\n        },\n        methods: {\n            // 人员分配列表\n            _personnelList(){\n                this.subscriptionList = []\n                this.$ajax.get(this.URL_ROOT+'/product-service/userCountryProductRel/findByCountryIdAndBusinessId?countryId='+this.countryId+'&businessId='+ this.$store.state.LoginedUser.userId).then((res) => {\n                    if(res.data.code == ERR_OK){\n                        var arr = res.data.data\n                        var map = {},\n                            dest = [];\n                        for(var i = 0; i < arr.length; i++){\n                            var a = arr[i];\n                            if(!map[a.productId]){\n                                dest.push({\n                                    productId: a.productId,\n                                    productModelNumber: a.productModelNumber,\n                                    countryName: a.countryName,\n                                    countryId: a.countryId,\n                                    _child: [a]\n                                });\n                                map[a.productId] = a;\n                            }else{\n                                for(var j = 0; j < dest.length; j++){\n                                    var dj = dest[j];\n                                    if(dj.productId == a.productId){\n                                        dj._child.push(a);\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        this.subscriptionList = dest\n                    }\n                })\n            },\n            // 分配人员\n            _distributionPersonnel(rows) {\n                if(rows){\n                   let productId = ''\n                    for(let i in this.productSelection){\n                        productId += this.productSelection[i].productId+\",\"\n                    }\n                    this.$ajax.put(this.URL_ROOT+'/product-service/userCountryProductRel/listInsert?productList='+productId+'&countryId='+this.countryId+'&user_id='+this.userId).then((res) => {\n                        if(res.data.code === ERR_OK){\n                            this.$notify({\n                                title: '添加成功',\n                                type: 'success'\n                            });\n                            this.addressclick()\n                        }else{\n                            const h = this.$createElement;\n                            this.$notify({\n                                title: '添加失败',\n                            });\n                        }\n                    }) \n                }\n            },\n            // 删除人员\n            _deletePersonnel(val){\n                let data = {\n                    'countryId': val.countryId,\n                    'productId': val.productId,\n                    'userId': val.userId\n                }\n                this.$ajax({\n                    method: 'post',\n                    url: this.URL_ROOT+'/product-service/userCountryProductRel/delete',\n                    data: data,\n                }).then((res) => {\n                    if(res.data.code === ERR_OK){\n                        this.$notify({\n                            title: '删除成功',\n                            type: 'success'\n                        });\n                        this.addressclick()\n                    }else{\n                        const h = this.$createElement;\n                        this.$notify({\n                            title: '删除失败',\n                        });\n                    }\n                })\n            },\n            // 获取多个商品id\n            _productSelection(val) {\n                this.productSelection = val;\n            },\n        }\n    }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/opts/subscriptionPersonnelTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.subscriptionList,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm._productSelection}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"countryName\",\"label\":\"国家\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"productModelNumber\",\"label\":\"产品名称\",\"width\":\"220\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"人员名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row._child),function(item){return (item.userName)?_c('el-tag',{key:item.id,attrs:{\"closable\":\"\",\"type\":\"info\"},on:{\"close\":function($event){return _vm._deletePersonnel(item)}}},[_vm._v(\"\\n                    \"+_vm._s(item.userName)+\"\\n                    \")]):_vm._e()})}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{on:{\"click\":function($event){return _vm._distributionPersonnel()}}},[_vm._v(\"分配\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-22331fb0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/opts/subscriptionPersonnelTable.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./subscriptionPersonnelTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./subscriptionPersonnelTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-22331fb0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./subscriptionPersonnelTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/opts/subscriptionPersonnelTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}